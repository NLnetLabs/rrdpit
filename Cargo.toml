[package]
name = "rrdpit"
version = "0.1.0"
authors = ["The NLnet Labs RPKI Team <rpki-team@nlnetlabs.nl>"]
description = "RRDP IT: A disk to RPKI Delta Protocol tool."
repository = "https://github.com/NLnetLabs/rrdpit"
keywords = ["rpki", "routing-security", "bgp"]
categories = ["command-line-utilities"]
edition = "2021"
license = "BSD-3-Clause"
readme = "README.md"

[dependencies]
base64       = "^0.22"
bytes        = "^1.10"
clap         = { version = "^4.5.39", features = ["cargo"] }
derive_more  = { version = "^2.0", features = ["full"] }
hex          = "^0.4.3"
ring         = "^0.17"
uuid         = { version = "^1.17", features = ["v4"] }
xml-rs       = "0.8.26"

[dev-dependencies]
tempfile     = "^3.20"

# ------------------------------------------------------------------------------
# START DEBIAN PACKAGING
#
# Configurations for the cargo-deb cargo plugin which builds Debian packages in
# target/debian/ when invoked with: cargo deb. 
#
# TODO:
# - Build packages with GH Actions
# - Add man page?
# - Add changelog
#
# NOTE:
# - There is a single binary only (no daemon yet)

[package.metadata.deb]
name = "rrdpit"
priority = "optional"
section = "net"
extended-description-file = "pkg/debian/description.txt"
license-file = ["LICENSE", "0"]
depends = ""
maintainer-scripts = "pkg/debian/"
changelog = "target/debian/changelog"                                  # this will be generated by the pkg workflow
copyright = "Copyright (c) 2025, NLnet Labs. All rights reserved."
assets = [["target/release/rrdpit", "/usr/bin/rrdpit", "755"]]

# List target variants
[package.metadata.deb.variants.ubuntu-focal]

[package.metadata.deb.variants.ubuntu-jammy]

[package.metadata.deb.variants.ubuntu-noble]

[package.metadata.deb.variants.debian-buster]

[package.metadata.deb.variants.debian-bullseye]

[package.metadata.deb.variants.debian-bookworm]

# END DEBIAN PACKAGING
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# START RPM PACKAGING
#
# Configurations for the cargo-generate-rpm cargo plugin which builds RPM
# packages in target/generate-rpm/ when invoked with: cargo generate-rpm
#
[package.metadata.generate-rpm]
assets = [
    { source = "target/release/rrdpit", dest = "/usr/bin/rrdpit", mode = "755" },
]
# END RPM PACKAGING
# ------------------------------------------------------------------------------
